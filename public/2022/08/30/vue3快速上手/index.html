<!DOCTYPE html><html lang="zh-CN" data-default-color-scheme="auto"><head><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="/img/tx.png"><link rel="icon" href="/img/tx.png"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests"><meta name="theme-color" content="#282c37"><meta name="author" content="å°å°å°ç†ŠçŒ«"><meta name="keywords" content=""><meta name="description" content="1.Vue3 ç®€ä»‹ 2020 å¹´ 9 æœˆ 18 æ—¥ï¼ŒVue.js å‘å¸ƒ 3.0 ç‰ˆæœ¬ï¼Œä»£å·ï¼šOne Pieceï¼ˆæµ·è´¼ç‹ï¼‰ è€—æ—¶ 2 å¹´å¤šã€2600+æ¬¡æäº¤ã€30+ä¸ª RFCã€600+æ¬¡ PRã€99 ä½è´¡çŒ®è€… github ä¸Šçš„ tags åœ°å€ï¼šhttps:&#x2F;&#x2F;github.com&#x2F;vuejs&#x2F;vue-next&#x2F;releases&#x2F;tag&#x2F;v3.0.0  2.Vue3 å¸¦æ¥äº†ä»€ä¹ˆ1.æ€§èƒ½çš„æå‡ æ‰“"><meta property="og:type" content="article"><meta property="og:title" content="å…³äºvue3"><meta property="og:url" content="http://example.com/2022/08/30/vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/index.html"><meta property="og:site_name" content="éƒ¦å…ˆæ£®"><meta property="og:description" content="1.Vue3 ç®€ä»‹ 2020 å¹´ 9 æœˆ 18 æ—¥ï¼ŒVue.js å‘å¸ƒ 3.0 ç‰ˆæœ¬ï¼Œä»£å·ï¼šOne Pieceï¼ˆæµ·è´¼ç‹ï¼‰ è€—æ—¶ 2 å¹´å¤šã€2600+æ¬¡æäº¤ã€30+ä¸ª RFCã€600+æ¬¡ PRã€99 ä½è´¡çŒ®è€… github ä¸Šçš„ tags åœ°å€ï¼šhttps:&#x2F;&#x2F;github.com&#x2F;vuejs&#x2F;vue-next&#x2F;releases&#x2F;tag&#x2F;v3.0.0  2.Vue3 å¸¦æ¥äº†ä»€ä¹ˆ1.æ€§èƒ½çš„æå‡ æ‰“"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="http://example.com/img2/hz3.jpg"><meta property="article:published_time" content="2022-08-30T07:14:15.634Z"><meta property="article:modified_time" content="2022-08-30T13:47:45.124Z"><meta property="article:author" content="å°å°å°ç†ŠçŒ«"><meta property="article:tag" content="vue3"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="http://example.com/img2/hz3.jpg"><meta name="key" content="value"><title>å…³äºvue3 - éƒ¦å…ˆæ£®</title><link rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css"><link rel="stylesheet" href="/css/main.css"><link id="highlight-css" rel="stylesheet" href="/css/highlight.css"><link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css"><script id="fluid-configs">var dntVal,Fluid=window.Fluid||{},CONFIG=(Fluid.ctx=Object.assign({},Fluid.ctx),{hostname:"example.com",root:"/",version:"1.9.2",typing:{enable:!0,typeSpeed:120,cursorChar:"ğŸš",loop:!0,scope:["home","post","about"]},anchorjs:{enable:!0,element:"h1,h2,h3,h4,h5,h6",placement:"left",visible:"hover",icon:"â¡"},progressbar:{enable:!0,height_px:3,color:"#29d",options:{showSpinner:!1,trickleSpeed:100}},code_language:{enable:!0,default:"TEXT"},copy_btn:!0,image_caption:{enable:!0},image_zoom:{enable:!0,img_url_replace:["",""]},toc:{enable:!0,placement:"right",headingSelector:"h1,h2,h3,h4,h5,h6",collapseDepth:0},lazyload:{enable:!0,loading_img:"/img/loading1.gif",onlypost:!1,offset_factor:2},web_analytics:{enable:!0,follow_dnt:!0,baidu:null,google:null,gtag:null,tencent:{sid:null,cid:null},woyaola:null,cnzz:null,leancloud:{app_id:"zS58KrYRwyaLlLiGO9KLFmbI-gzGzoHsz",app_key:"bLR5HdAJ30lz1WkxlLhRzbi9",server_url:"https://1epgvtla.lc-cn-n1-shared.com",path:"window.location.pathname",ignore_local:!1}},search_path:"/local-search.xml"});CONFIG.web_analytics.follow_dnt&&(dntVal=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,Fluid.ctx.dnt=dntVal&&(dntVal.startsWith("1")||dntVal.startsWith("yes")||dntVal.startsWith("on")))</script><script src="/js/utils.js"></script><script src="/js/color-schema.js"></script><meta name="generator" content="Hexo 5.4.2"></head><script type="text/javascript" src="/js/FunnyTitle.js"></script><body><header><div class="header-inner" style="height:70vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/"><strong>LCS&#39;Blog</strong> </a><button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/"><i class="iconfont icon-home-fill"></i> é¦–é¡µ</a></li><li class="nav-item"><a class="nav-link" href="/archives/"><i class="iconfont icon-archive-fill"></i> å½’æ¡£</a></li><li class="nav-item"><a class="nav-link" href="/categories/"><i class="iconfont icon-category-fill"></i> åˆ†ç±»</a></li><li class="nav-item"><a class="nav-link" href="/tags/"><i class="iconfont icon-tags-fill"></i> æ ‡ç­¾</a></li><li class="nav-item"><a class="nav-link" href="/about/"><i class="iconfont icon-user-fill"></i> å…³äº</a></li><li class="nav-item"><a class="nav-link" href="/playlist/"><i class="iconfont icon-music"></i> éŸ³ä¹</a></li><li class="nav-item"><a class="nav-link" href="/photos/"><i class="iconfont icon-images"></i> ç›¸å†Œ</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" target="_self" href="javascript:;" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="iconfont icon-steam"></i> å°æ¸¸æˆ</a><div class="dropdown-menu" aria-labelledby="navbarDropdown"><a class="dropdown-item" href="/example/niudun/">ç‰›é¡¿åŠ›å­¦ </a><a class="dropdown-item" href="/example/cat/">å›´å°çŒ« </a><a class="dropdown-item" href="/example/zfj/">é£æœºç©¿æ¢­ </a><a class="dropdown-item" href="/example/dist/">åå°å°é¡¹ç›®</a></div></li><li class="nav-item" id="search-btn"><a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">&nbsp;<i class="iconfont icon-search"></i>&nbsp;</a></li><li class="nav-item" id="color-toggle-btn"><a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a></li></ul></div></div></nav><div id="banner" class="banner" parallax="true" style="background:url(/img2/hz5.jpg) no-repeat center center;background-size:cover"><div class="full-bg-img"><div class="mask flex-center" style="background-color:rgba(0,0,0,.3)"><div class="banner-text text-center fade-in-up"><div class="h2"><span id="subtitle" data-typed-text="å…³äºvue3"></span></div><div class="mt-3"><span class="post-meta"><i class="iconfont icon-date-fill" aria-hidden="true"></i> <time datetime="2022-08-30 15:14" pubdate>2022å¹´8æœˆ30æ—¥ ä¸‹åˆ</time></span></div><div class="mt-1"><span class="post-meta mr-2"><i class="iconfont icon-chart"></i> 10k å­— </span><span class="post-meta mr-2"><i class="iconfont icon-clock-fill"></i> 87 åˆ†é’Ÿ</span></div></div></div></div></div></div></header><main><div class="container-fluid nopadding-x"><div class="row nomargin-x"><div class="side-col d-none d-lg-block col-lg-2"></div><div class="col-lg-8 nopadding-x-md"><div class="container nopadding-x-md" id="board-ctn"><div id="board"><article class="post-content mx-auto"><h1 style="display:none">å…³äºvue3</h1><div class="markdown-body"><img src="https://user-images.githubusercontent.com/499550/93624428-53932780-f9ae-11ea-8d16-af949e16a09f.png" srcset="/img/loading1.gif" lazyload style="width:200px"><h2 id="1-Vue3-ç®€ä»‹"><a href="#1-Vue3-ç®€ä»‹" class="headerlink" title="1.Vue3 ç®€ä»‹"></a>1.Vue3 ç®€ä»‹</h2><ul><li>2020 å¹´ 9 æœˆ 18 æ—¥ï¼ŒVue.js å‘å¸ƒ 3.0 ç‰ˆæœ¬ï¼Œä»£å·ï¼šOne Pieceï¼ˆæµ·è´¼ç‹ï¼‰</li><li>è€—æ—¶ 2 å¹´å¤šã€<a target="_blank" rel="noopener" href="https://github.com/vuejs/vue-next/graphs/commit-activity">2600+æ¬¡æäº¤</a>ã€<a target="_blank" rel="noopener" href="https://github.com/vuejs/rfcs/tree/master/active-rfcs">30+ä¸ª RFC</a>ã€<a target="_blank" rel="noopener" href="https://github.com/vuejs/vue-next/pulls?q=is:pr+is:merged+-author:app/dependabot-preview+">600+æ¬¡ PR</a>ã€<a target="_blank" rel="noopener" href="https://github.com/vuejs/vue-next/graphs/contributors">99 ä½è´¡çŒ®è€…</a></li><li>github ä¸Šçš„ tags åœ°å€ï¼š<a target="_blank" rel="noopener" href="https://github.com/vuejs/vue-next/releases/tag/v3.0.0">https://github.com/vuejs/vue-next/releases/tag/v3.0.0</a></li></ul><h2 id="2-Vue3-å¸¦æ¥äº†ä»€ä¹ˆ"><a href="#2-Vue3-å¸¦æ¥äº†ä»€ä¹ˆ" class="headerlink" title="2.Vue3 å¸¦æ¥äº†ä»€ä¹ˆ"></a>2.Vue3 å¸¦æ¥äº†ä»€ä¹ˆ</h2><h3 id="1-æ€§èƒ½çš„æå‡"><a href="#1-æ€§èƒ½çš„æå‡" class="headerlink" title="1.æ€§èƒ½çš„æå‡"></a>1.æ€§èƒ½çš„æå‡</h3><ul><li><p>æ‰“åŒ…å¤§å°å‡å°‘ 41%</p></li><li><p>åˆæ¬¡æ¸²æŸ“å¿« 55%, æ›´æ–°æ¸²æŸ“å¿« 133%</p></li><li><p>å†…å­˜å‡å°‘ 54%</p><p>â€¦â€¦</p></li></ul><h3 id="2-æºç çš„å‡çº§"><a href="#2-æºç çš„å‡çº§" class="headerlink" title="2.æºç çš„å‡çº§"></a>2.æºç çš„å‡çº§</h3><ul><li><p>ä½¿ç”¨ Proxy ä»£æ›¿ defineProperty å®ç°å“åº”å¼</p></li><li><p>é‡å†™è™šæ‹Ÿ DOM çš„å®ç°å’Œ Tree-Shaking</p><p>â€¦â€¦</p></li></ul><h3 id="3-æ‹¥æŠ±-TypeScript"><a href="#3-æ‹¥æŠ±-TypeScript" class="headerlink" title="3.æ‹¥æŠ± TypeScript"></a>3.æ‹¥æŠ± TypeScript</h3><ul><li>Vue3 å¯ä»¥æ›´å¥½çš„æ”¯æŒ TypeScript</li></ul><h3 id="4-æ–°çš„ç‰¹æ€§"><a href="#4-æ–°çš„ç‰¹æ€§" class="headerlink" title="4.æ–°çš„ç‰¹æ€§"></a>4.æ–°çš„ç‰¹æ€§</h3><ol><li><p>Composition APIï¼ˆç»„åˆ APIï¼‰</p><ul><li>setup é…ç½®</li><li>ref ä¸ reactive</li><li>watch ä¸ watchEffect</li><li>provide ä¸ inject</li><li>â€¦â€¦</li></ul></li><li><p>æ–°çš„å†…ç½®ç»„ä»¶</p><ul><li>Fragment</li><li>Teleport</li><li>Suspense</li></ul></li><li><p>å…¶ä»–æ”¹å˜</p><ul><li>æ–°çš„ç”Ÿå‘½å‘¨æœŸé’©å­</li><li>data é€‰é¡¹åº”å§‹ç»ˆè¢«å£°æ˜ä¸ºä¸€ä¸ªå‡½æ•°</li><li>ç§»é™¤ keyCode æ”¯æŒä½œä¸º v-on çš„ä¿®é¥°ç¬¦</li><li>â€¦â€¦</li></ul></li></ol><h1 id="ä¸€ã€åˆ›å»º-Vue3-0-å·¥ç¨‹"><a href="#ä¸€ã€åˆ›å»º-Vue3-0-å·¥ç¨‹" class="headerlink" title="ä¸€ã€åˆ›å»º Vue3.0 å·¥ç¨‹"></a>ä¸€ã€åˆ›å»º Vue3.0 å·¥ç¨‹</h1><h2 id="1-ä½¿ç”¨-vue-cli-åˆ›å»º"><a href="#1-ä½¿ç”¨-vue-cli-åˆ›å»º" class="headerlink" title="1.ä½¿ç”¨ vue-cli åˆ›å»º"></a>1.ä½¿ç”¨ vue-cli åˆ›å»º</h2><p>å®˜æ–¹æ–‡æ¡£ï¼š<a target="_blank" rel="noopener" href="https://cli.vuejs.org/zh/guide/creating-a-project.html#vue-create">https://cli.vuejs.org/zh/guide/creating-a-project.html#vue-create</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">## æŸ¥çœ‹@vue/cliç‰ˆæœ¬ï¼Œç¡®ä¿@vue/cliç‰ˆæœ¬åœ¨4.5.0ä»¥ä¸Š</span><br>vue --version<br><span class="hljs-comment">## å®‰è£…æˆ–è€…å‡çº§ä½ çš„@vue/cli</span><br>npm install -g @vue/cli<br><span class="hljs-comment">## åˆ›å»º</span><br>vue create vue_test<br><span class="hljs-comment">## å¯åŠ¨</span><br><span class="hljs-built_in">cd</span> vue_test<br>npm run serve<br></code></pre></td></tr></table></figure><h2 id="2-ä½¿ç”¨-vite-åˆ›å»º"><a href="#2-ä½¿ç”¨-vite-åˆ›å»º" class="headerlink" title="2.ä½¿ç”¨ vite åˆ›å»º"></a>2.ä½¿ç”¨ vite åˆ›å»º</h2><p>å®˜æ–¹æ–‡æ¡£ï¼š<a target="_blank" rel="noopener" href="https://v3.cn.vuejs.org/guide/installation.html#vite">https://v3.cn.vuejs.org/guide/installation.html#vite</a></p><p>vite å®˜ç½‘ï¼š<a target="_blank" rel="noopener" href="https://vitejs.cn/">https://vitejs.cn</a></p><ul><li>ä»€ä¹ˆæ˜¯ viteï¼Ÿâ€”â€” æ–°ä¸€ä»£å‰ç«¯æ„å»ºå·¥å…·ã€‚</li><li>ä¼˜åŠ¿å¦‚ä¸‹ï¼š<ul><li>å¼€å‘ç¯å¢ƒä¸­ï¼Œæ— éœ€æ‰“åŒ…æ“ä½œï¼Œå¯å¿«é€Ÿçš„å†·å¯åŠ¨ã€‚</li><li>è½»é‡å¿«é€Ÿçš„çƒ­é‡è½½ï¼ˆHMRï¼‰ã€‚</li><li>çœŸæ­£çš„æŒ‰éœ€ç¼–è¯‘ï¼Œä¸å†ç­‰å¾…æ•´ä¸ªåº”ç”¨ç¼–è¯‘å®Œæˆã€‚</li></ul></li><li>ä¼ ç»Ÿæ„å»º ä¸ vite æ„å»ºå¯¹æ¯”å›¾</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">## åˆ›å»ºå·¥ç¨‹</span><br>npm init vite-app &lt;project-name&gt;<br><span class="hljs-comment">## è¿›å…¥å·¥ç¨‹ç›®å½•</span><br><span class="hljs-built_in">cd</span> &lt;project-name&gt;<br><span class="hljs-comment">## å®‰è£…ä¾èµ–</span><br>npm install<br><span class="hljs-comment">## è¿è¡Œ</span><br>npm run dev<br></code></pre></td></tr></table></figure><h1 id="äºŒã€å¸¸ç”¨-Composition-API"><a href="#äºŒã€å¸¸ç”¨-Composition-API" class="headerlink" title="äºŒã€å¸¸ç”¨ Composition API"></a>äºŒã€å¸¸ç”¨ Composition API</h1><p>å®˜æ–¹æ–‡æ¡£: <a target="_blank" rel="noopener" href="https://v3.cn.vuejs.org/guide/composition-api-introduction.html">https://v3.cn.vuejs.org/guide/composition-api-introduction.html</a></p><h2 id="1-æ‹‰å¼€åºå¹•çš„-setup"><a href="#1-æ‹‰å¼€åºå¹•çš„-setup" class="headerlink" title="1.æ‹‰å¼€åºå¹•çš„ setup"></a>1.æ‹‰å¼€åºå¹•çš„ setup</h2><ol><li>ç†è§£ï¼šVue3.0 ä¸­ä¸€ä¸ªæ–°çš„é…ç½®é¡¹ï¼Œå€¼ä¸ºä¸€ä¸ªå‡½æ•°ã€‚</li><li>setup æ˜¯æ‰€æœ‰<strong style="color:#dd5145">Composition APIï¼ˆç»„åˆ APIï¼‰</strong><i style="color:gray;font-weight:700">â€œ è¡¨æ¼”çš„èˆå° â€</i>ã€‚</li><li>ç»„ä»¶ä¸­æ‰€ç”¨åˆ°çš„ï¼šæ•°æ®ã€æ–¹æ³•ç­‰ç­‰ï¼Œå‡è¦é…ç½®åœ¨ setup ä¸­ã€‚</li><li>setup å‡½æ•°çš„ä¸¤ç§è¿”å›å€¼ï¼š<ol><li>è‹¥è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œåˆ™å¯¹è±¡ä¸­çš„å±æ€§ã€æ–¹æ³•, åœ¨æ¨¡æ¿ä¸­å‡å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚ï¼ˆé‡ç‚¹å…³æ³¨ï¼ï¼‰</li><li><span style="color:#aad">è‹¥è¿”å›ä¸€ä¸ªæ¸²æŸ“å‡½æ•°ï¼šåˆ™å¯ä»¥è‡ªå®šä¹‰æ¸²æŸ“å†…å®¹ã€‚ï¼ˆäº†è§£ï¼‰</span></li></ol></li><li>æ³¨æ„ç‚¹ï¼š<ol><li>å°½é‡ä¸è¦ä¸ Vue2.x é…ç½®æ··ç”¨<ul><li>Vue2.x é…ç½®ï¼ˆdataã€methosã€computedâ€¦ï¼‰ä¸­<strong style="color:#dd5145">å¯ä»¥è®¿é—®åˆ°</strong>setup ä¸­çš„å±æ€§ã€æ–¹æ³•ã€‚</li><li>ä½†åœ¨ setup ä¸­<strong style="color:#dd5145">ä¸èƒ½è®¿é—®åˆ°</strong>Vue2.x é…ç½®ï¼ˆdataã€methosã€computedâ€¦ï¼‰ã€‚</li><li>å¦‚æœæœ‰é‡å, setup ä¼˜å…ˆã€‚</li></ul></li><li>setup ä¸èƒ½æ˜¯ä¸€ä¸ª async å‡½æ•°ï¼Œå› ä¸ºè¿”å›å€¼ä¸å†æ˜¯ return çš„å¯¹è±¡, è€Œæ˜¯ promise, æ¨¡æ¿çœ‹ä¸åˆ° return å¯¹è±¡ä¸­çš„å±æ€§ã€‚ï¼ˆåæœŸä¹Ÿå¯ä»¥è¿”å›ä¸€ä¸ª Promise å®ä¾‹ï¼Œä½†éœ€è¦ Suspense å’Œå¼‚æ­¥ç»„ä»¶çš„é…åˆï¼‰</li></ol></li></ol><h2 id="2-ref-å‡½æ•°"><a href="#2-ref-å‡½æ•°" class="headerlink" title="2.ref å‡½æ•°"></a>2.ref å‡½æ•°</h2><ul><li>ä½œç”¨: å®šä¹‰ä¸€ä¸ªå“åº”å¼çš„æ•°æ®</li><li>è¯­æ³•: <code>const xxx = ref(initValue)</code><ul><li>åˆ›å»ºä¸€ä¸ªåŒ…å«å“åº”å¼æ•°æ®çš„<strong style="color:#dd5145">å¼•ç”¨å¯¹è±¡ï¼ˆreference å¯¹è±¡ï¼Œç®€ç§° ref å¯¹è±¡ï¼‰</strong>ã€‚</li><li>JS ä¸­æ“ä½œæ•°æ®ï¼š <code>xxx.value</code></li><li>æ¨¡æ¿ä¸­è¯»å–æ•°æ®: ä¸éœ€è¦.valueï¼Œç›´æ¥ï¼š<code>&lt;div&gt;&#123;&#123;xxx&#125;&#125;&lt;/div&gt;</code></li></ul></li><li>å¤‡æ³¨ï¼š<ul><li>æ¥æ”¶çš„æ•°æ®å¯ä»¥æ˜¯ï¼šåŸºæœ¬ç±»å‹ã€ä¹Ÿå¯ä»¥æ˜¯å¯¹è±¡ç±»å‹ã€‚</li><li>åŸºæœ¬ç±»å‹çš„æ•°æ®ï¼šå“åº”å¼ä¾ç„¶æ˜¯é <code>Object.defineProperty()</code>çš„<code>get</code>ä¸<code>set</code>å®Œæˆçš„ã€‚</li><li>å¯¹è±¡ç±»å‹çš„æ•°æ®ï¼šå†…éƒ¨ <i style="color:gray;font-weight:700">â€œ æ±‚åŠ© â€</i> äº† Vue3.0 ä¸­çš„ä¸€ä¸ªæ–°å‡½æ•°â€”â€” <code>reactive</code>å‡½æ•°ã€‚</li></ul></li></ul><h2 id="3-reactive-å‡½æ•°"><a href="#3-reactive-å‡½æ•°" class="headerlink" title="3.reactive å‡½æ•°"></a>3.reactive å‡½æ•°</h2><ul><li>ä½œç”¨: å®šä¹‰ä¸€ä¸ª<strong style="color:#dd5145">å¯¹è±¡ç±»å‹</strong>çš„å“åº”å¼æ•°æ®ï¼ˆåŸºæœ¬ç±»å‹ä¸è¦ç”¨å®ƒï¼Œè¦ç”¨<code>ref</code>å‡½æ•°ï¼‰</li><li>è¯­æ³•ï¼š<code>const ä»£ç†å¯¹è±¡= reactive(æºå¯¹è±¡)</code>æ¥æ”¶ä¸€ä¸ªå¯¹è±¡ï¼ˆæˆ–æ•°ç»„ï¼‰ï¼Œè¿”å›ä¸€ä¸ª<strong style="color:#dd5145">ä»£ç†å¯¹è±¡ï¼ˆProxy çš„å®ä¾‹å¯¹è±¡ï¼Œç®€ç§° proxy å¯¹è±¡ï¼‰</strong></li><li>reactive å®šä¹‰çš„å“åº”å¼æ•°æ®æ˜¯â€œæ·±å±‚æ¬¡çš„â€ã€‚</li><li>å†…éƒ¨åŸºäº ES6 çš„ Proxy å®ç°ï¼Œé€šè¿‡ä»£ç†å¯¹è±¡æ“ä½œæºå¯¹è±¡å†…éƒ¨æ•°æ®è¿›è¡Œæ“ä½œã€‚</li></ul><h2 id="4-Vue3-0-ä¸­çš„å“åº”å¼åŸç†"><a href="#4-Vue3-0-ä¸­çš„å“åº”å¼åŸç†" class="headerlink" title="4.Vue3.0 ä¸­çš„å“åº”å¼åŸç†"></a>4.Vue3.0 ä¸­çš„å“åº”å¼åŸç†</h2><h3 id="vue2-x-çš„å“åº”å¼"><a href="#vue2-x-çš„å“åº”å¼" class="headerlink" title="vue2.x çš„å“åº”å¼"></a>vue2.x çš„å“åº”å¼</h3><ul><li><p>å®ç°åŸç†ï¼š</p><ul><li><p>å¯¹è±¡ç±»å‹ï¼šé€šè¿‡<code>Object.defineProperty()</code>å¯¹å±æ€§çš„è¯»å–ã€ä¿®æ”¹è¿›è¡Œæ‹¦æˆªï¼ˆæ•°æ®åŠ«æŒï¼‰ã€‚</p></li><li><p>æ•°ç»„ç±»å‹ï¼šé€šè¿‡é‡å†™æ›´æ–°æ•°ç»„çš„ä¸€ç³»åˆ—æ–¹æ³•æ¥å®ç°æ‹¦æˆªã€‚ï¼ˆå¯¹æ•°ç»„çš„å˜æ›´æ–¹æ³•è¿›è¡Œäº†åŒ…è£¹ï¼‰ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(data, <span class="hljs-string">&quot;count&quot;</span>, &#123;<br>  <span class="hljs-title function_">get</span>(<span class="hljs-params"></span>) &#123;&#125;,<br>  <span class="hljs-title function_">set</span>(<span class="hljs-params"></span>) &#123;&#125;,<br>&#125;);<br></code></pre></td></tr></table></figure></li></ul></li><li><p>å­˜åœ¨é—®é¢˜ï¼š</p><ul><li>æ–°å¢å±æ€§ã€åˆ é™¤å±æ€§, ç•Œé¢ä¸ä¼šæ›´æ–°ã€‚</li><li>ç›´æ¥é€šè¿‡ä¸‹æ ‡ä¿®æ”¹æ•°ç»„, ç•Œé¢ä¸ä¼šè‡ªåŠ¨æ›´æ–°ã€‚</li></ul></li></ul><h3 id="Vue3-0-çš„å“åº”å¼"><a href="#Vue3-0-çš„å“åº”å¼" class="headerlink" title="Vue3.0 çš„å“åº”å¼"></a>Vue3.0 çš„å“åº”å¼</h3><ul><li><p>å®ç°åŸç†:</p><ul><li><p>é€šè¿‡ Proxyï¼ˆä»£ç†ï¼‰: æ‹¦æˆªå¯¹è±¡ä¸­ä»»æ„å±æ€§çš„å˜åŒ–, åŒ…æ‹¬ï¼šå±æ€§å€¼çš„è¯»å†™ã€å±æ€§çš„æ·»åŠ ã€å±æ€§çš„åˆ é™¤ç­‰ã€‚</p></li><li><p>é€šè¿‡ Reflectï¼ˆåå°„ï¼‰: å¯¹æºå¯¹è±¡çš„å±æ€§è¿›è¡Œæ“ä½œã€‚</p></li><li><p>MDN æ–‡æ¡£ä¸­æè¿°çš„ Proxy ä¸ Reflectï¼š</p><ul><li><p>Proxyï¼š<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy</a></p></li><li><p>Reflectï¼š<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect</a></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>(data, &#123;<br>  <span class="hljs-comment">// æ‹¦æˆªè¯»å–å±æ€§å€¼</span><br>  <span class="hljs-title function_">get</span>(<span class="hljs-params">target, prop</span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">get</span>(target, prop);<br>  &#125;,<br>  <span class="hljs-comment">// æ‹¦æˆªè®¾ç½®å±æ€§å€¼æˆ–æ·»åŠ æ–°å±æ€§</span><br>  <span class="hljs-title function_">set</span>(<span class="hljs-params">target, prop, value</span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">set</span>(target, prop, value);<br>  &#125;,<br>  <span class="hljs-comment">// æ‹¦æˆªåˆ é™¤å±æ€§</span><br>  <span class="hljs-title function_">deleteProperty</span>(<span class="hljs-params">target, prop</span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">deleteProperty</span>(target, prop);<br>  &#125;,<br>&#125;);<br><br>proxy.<span class="hljs-property">name</span> = <span class="hljs-string">&quot;tom&quot;</span>;<br></code></pre></td></tr></table></figure></li></ul></li></ul></li></ul><h2 id="5-reactive-å¯¹æ¯”-ref"><a href="#5-reactive-å¯¹æ¯”-ref" class="headerlink" title="5.reactive å¯¹æ¯” ref"></a>5.reactive å¯¹æ¯” ref</h2><ul><li>ä»å®šä¹‰æ•°æ®è§’åº¦å¯¹æ¯”ï¼š<ul><li>ref ç”¨æ¥å®šä¹‰ï¼š<strong style="color:#dd5145">åŸºæœ¬ç±»å‹æ•°æ®</strong>ã€‚</li><li>reactive ç”¨æ¥å®šä¹‰ï¼š<strong style="color:#dd5145">å¯¹è±¡ï¼ˆæˆ–æ•°ç»„ï¼‰ç±»å‹æ•°æ®</strong>ã€‚</li><li>å¤‡æ³¨ï¼šref ä¹Ÿå¯ä»¥ç”¨æ¥å®šä¹‰<strong style="color:#dd5145">å¯¹è±¡ï¼ˆæˆ–æ•°ç»„ï¼‰ç±»å‹æ•°æ®</strong>, å®ƒå†…éƒ¨ä¼šè‡ªåŠ¨é€šè¿‡<code>reactive</code>è½¬ä¸º<strong style="color:#dd5145">ä»£ç†å¯¹è±¡</strong>ã€‚</li></ul></li><li>ä»åŸç†è§’åº¦å¯¹æ¯”ï¼š<ul><li>ref é€šè¿‡<code>Object.defineProperty()</code>çš„<code>get</code>ä¸<code>set</code>æ¥å®ç°å“åº”å¼ï¼ˆæ•°æ®åŠ«æŒï¼‰ã€‚</li><li>reactive é€šè¿‡ä½¿ç”¨<strong style="color:#dd5145">Proxy</strong>æ¥å®ç°å“åº”å¼ï¼ˆæ•°æ®åŠ«æŒï¼‰, å¹¶é€šè¿‡<strong style="color:#dd5145">Reflect</strong>æ“ä½œ<strong style="color:orange">æºå¯¹è±¡</strong>å†…éƒ¨çš„æ•°æ®ã€‚</li></ul></li><li>ä»ä½¿ç”¨è§’åº¦å¯¹æ¯”ï¼š<ul><li>ref å®šä¹‰çš„æ•°æ®ï¼šæ“ä½œæ•°æ®<strong style="color:#dd5145">éœ€è¦</strong><code>.value</code>ï¼Œè¯»å–æ•°æ®æ—¶æ¨¡æ¿ä¸­ç›´æ¥è¯»å–<strong style="color:#dd5145">ä¸éœ€è¦</strong><code>.value</code>ã€‚</li><li>reactive å®šä¹‰çš„æ•°æ®ï¼šæ“ä½œæ•°æ®ä¸è¯»å–æ•°æ®ï¼š<strong style="color:#dd5145">å‡ä¸éœ€è¦</strong><code>.value</code>ã€‚</li></ul></li></ul><h2 id="6-setup-çš„ä¸¤ä¸ªæ³¨æ„ç‚¹"><a href="#6-setup-çš„ä¸¤ä¸ªæ³¨æ„ç‚¹" class="headerlink" title="6.setup çš„ä¸¤ä¸ªæ³¨æ„ç‚¹"></a>6.setup çš„ä¸¤ä¸ªæ³¨æ„ç‚¹</h2><ul><li>setup æ‰§è¡Œçš„æ—¶æœº<ul><li>åœ¨ beforeCreate ä¹‹å‰æ‰§è¡Œä¸€æ¬¡ï¼Œthis æ˜¯ undefinedã€‚</li></ul></li><li>setup çš„å‚æ•°<ul><li>propsï¼šå€¼ä¸ºå¯¹è±¡ï¼ŒåŒ…å«ï¼šç»„ä»¶å¤–éƒ¨ä¼ é€’è¿‡æ¥ï¼Œä¸”ç»„ä»¶å†…éƒ¨å£°æ˜æ¥æ”¶äº†çš„å±æ€§ã€‚</li><li>contextï¼šä¸Šä¸‹æ–‡å¯¹è±¡<ul><li>attrs: å€¼ä¸ºå¯¹è±¡ï¼ŒåŒ…å«ï¼šç»„ä»¶å¤–éƒ¨ä¼ é€’è¿‡æ¥ï¼Œä½†æ²¡æœ‰åœ¨ props é…ç½®ä¸­å£°æ˜çš„å±æ€§, ç›¸å½“äº <code>this.$attrs</code>ã€‚</li><li>slots: æ”¶åˆ°çš„æ’æ§½å†…å®¹, ç›¸å½“äº <code>this.$slots</code>ã€‚</li><li>emit: åˆ†å‘è‡ªå®šä¹‰äº‹ä»¶çš„å‡½æ•°, ç›¸å½“äº <code>this.$emit</code>ã€‚</li></ul></li></ul></li></ul><h2 id="7-è®¡ç®—å±æ€§ä¸ç›‘è§†"><a href="#7-è®¡ç®—å±æ€§ä¸ç›‘è§†" class="headerlink" title="7.è®¡ç®—å±æ€§ä¸ç›‘è§†"></a>7.è®¡ç®—å±æ€§ä¸ç›‘è§†</h2><h3 id="1-computed-å‡½æ•°"><a href="#1-computed-å‡½æ•°" class="headerlink" title="1.computed å‡½æ•°"></a>1.computed å‡½æ•°</h3><ul><li><p>ä¸ Vue2.x ä¸­ computed é…ç½®åŠŸèƒ½ä¸€è‡´</p></li><li><p>å†™æ³•</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123;computed&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><br><span class="hljs-title function_">setup</span>(<span class="hljs-params"></span>)&#123;<br>    ...<br>	<span class="hljs-comment">//è®¡ç®—å±æ€§â€”â€”ç®€å†™</span><br>    <span class="hljs-keyword">let</span> fullName = <span class="hljs-title function_">computed</span>(<span class="hljs-function">()=&gt;</span>&#123;<br>        <span class="hljs-keyword">return</span> person.<span class="hljs-property">firstName</span> + <span class="hljs-string">&#x27;-&#x27;</span> + person.<span class="hljs-property">lastName</span><br>    &#125;)<br>    <span class="hljs-comment">//è®¡ç®—å±æ€§â€”â€”å®Œæ•´</span><br>    <span class="hljs-keyword">let</span> fullName = <span class="hljs-title function_">computed</span>(&#123;<br>        <span class="hljs-title function_">get</span>(<span class="hljs-params"></span>)&#123;<br>            <span class="hljs-keyword">return</span> person.<span class="hljs-property">firstName</span> + <span class="hljs-string">&#x27;-&#x27;</span> + person.<span class="hljs-property">lastName</span><br>        &#125;,<br>        <span class="hljs-title function_">set</span>(<span class="hljs-params">value</span>)&#123;<br>            <span class="hljs-keyword">const</span> nameArr = value.<span class="hljs-title function_">split</span>(<span class="hljs-string">&#x27;-&#x27;</span>)<br>            person.<span class="hljs-property">firstName</span> = nameArr[<span class="hljs-number">0</span>]<br>            person.<span class="hljs-property">lastName</span> = nameArr[<span class="hljs-number">1</span>]<br>        &#125;<br>    &#125;)<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="2-watch-å‡½æ•°"><a href="#2-watch-å‡½æ•°" class="headerlink" title="2.watch å‡½æ•°"></a>2.watch å‡½æ•°</h3><ul><li><p>ä¸ Vue2.x ä¸­ watch é…ç½®åŠŸèƒ½ä¸€è‡´</p></li><li><p>ä¸¤ä¸ªå°â€œå‘â€ï¼š</p><ul><li>ç›‘è§† reactive å®šä¹‰çš„å“åº”å¼æ•°æ®æ—¶ï¼šoldValue æ— æ³•æ­£ç¡®è·å–ã€å¼ºåˆ¶å¼€å¯äº†æ·±åº¦ç›‘è§†ï¼ˆdeep é…ç½®å¤±æ•ˆï¼‰ã€‚</li><li>ç›‘è§† reactive å®šä¹‰çš„å“åº”å¼æ•°æ®ä¸­æŸä¸ªå±æ€§æ—¶ï¼šdeep é…ç½®æœ‰æ•ˆã€‚</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//æƒ…å†µä¸€ï¼šç›‘è§†refå®šä¹‰çš„å“åº”å¼æ•°æ®</span><br><span class="hljs-title function_">watch</span>(<br>  sum,<br>  <span class="hljs-function">(<span class="hljs-params">newValue, oldValue</span>) =&gt;</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;sumå˜åŒ–äº†&quot;</span>, newValue, oldValue);<br>  &#125;,<br>  &#123; <span class="hljs-attr">immediate</span>: <span class="hljs-literal">true</span> &#125;<br>);<br><br><span class="hljs-comment">//æƒ…å†µäºŒï¼šç›‘è§†å¤šä¸ªrefå®šä¹‰çš„å“åº”å¼æ•°æ®</span><br><span class="hljs-title function_">watch</span>([sum, msg], <span class="hljs-function">(<span class="hljs-params">newValue, oldValue</span>) =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;sumæˆ–msgå˜åŒ–äº†&quot;</span>, newValue, oldValue);<br>&#125;);<br><br><span class="hljs-comment">/* æƒ…å†µä¸‰ï¼šç›‘è§†reactiveå®šä¹‰çš„å“åº”å¼æ•°æ®</span><br><span class="hljs-comment">			è‹¥watchç›‘è§†çš„æ˜¯reactiveå®šä¹‰çš„å“åº”å¼æ•°æ®ï¼Œåˆ™æ— æ³•æ­£ç¡®è·å¾—oldValueï¼ï¼</span><br><span class="hljs-comment">			è‹¥watchç›‘è§†çš„æ˜¯reactiveå®šä¹‰çš„å“åº”å¼æ•°æ®ï¼Œåˆ™å¼ºåˆ¶å¼€å¯äº†æ·±åº¦ç›‘è§† </span><br><span class="hljs-comment">*/</span><br><span class="hljs-title function_">watch</span>(<br>  person,<br>  <span class="hljs-function">(<span class="hljs-params">newValue, oldValue</span>) =&gt;</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;personå˜åŒ–äº†&quot;</span>, newValue, oldValue);<br>  &#125;,<br>  &#123; <span class="hljs-attr">immediate</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">deep</span>: <span class="hljs-literal">false</span> &#125;<br>); <span class="hljs-comment">//æ­¤å¤„çš„deepé…ç½®ä¸å†å¥æ•ˆ</span><br><br><span class="hljs-comment">//æƒ…å†µå››ï¼šç›‘è§†reactiveå®šä¹‰çš„å“åº”å¼æ•°æ®ä¸­çš„æŸä¸ªå±æ€§</span><br><span class="hljs-title function_">watch</span>(<br>  <span class="hljs-function">() =&gt;</span> person.<span class="hljs-property">job</span>,<br>  <span class="hljs-function">(<span class="hljs-params">newValue, oldValue</span>) =&gt;</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;personçš„jobå˜åŒ–äº†&quot;</span>, newValue, oldValue);<br>  &#125;,<br>  &#123; <span class="hljs-attr">immediate</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">deep</span>: <span class="hljs-literal">true</span> &#125;<br>);<br><br><span class="hljs-comment">//æƒ…å†µäº”ï¼šç›‘è§†reactiveå®šä¹‰çš„å“åº”å¼æ•°æ®ä¸­çš„æŸäº›å±æ€§</span><br><span class="hljs-title function_">watch</span>(<br>  [<span class="hljs-function">() =&gt;</span> person.<span class="hljs-property">job</span>, <span class="hljs-function">() =&gt;</span> person.<span class="hljs-property">name</span>],<br>  <span class="hljs-function">(<span class="hljs-params">newValue, oldValue</span>) =&gt;</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;personçš„jobå˜åŒ–äº†&quot;</span>, newValue, oldValue);<br>  &#125;,<br>  &#123; <span class="hljs-attr">immediate</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">deep</span>: <span class="hljs-literal">true</span> &#125;<br>);<br><br><span class="hljs-comment">//ç‰¹æ®Šæƒ…å†µ</span><br><span class="hljs-title function_">watch</span>(<br>  <span class="hljs-function">() =&gt;</span> person.<span class="hljs-property">job</span>,<br>  <span class="hljs-function">(<span class="hljs-params">newValue, oldValue</span>) =&gt;</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;personçš„jobå˜åŒ–äº†&quot;</span>, newValue, oldValue);<br>  &#125;,<br>  &#123; <span class="hljs-attr">deep</span>: <span class="hljs-literal">true</span> &#125;<br>); <span class="hljs-comment">//æ­¤å¤„ç”±äºç›‘è§†çš„æ˜¯reactiveç´ å®šä¹‰çš„å¯¹è±¡ä¸­çš„æŸä¸ªå±æ€§ï¼Œæ‰€ä»¥deepé…ç½®æœ‰æ•ˆ</span><br></code></pre></td></tr></table></figure></li></ul><h3 id="3-watchEffect-å‡½æ•°"><a href="#3-watchEffect-å‡½æ•°" class="headerlink" title="3.watchEffect å‡½æ•°"></a>3.watchEffect å‡½æ•°</h3><ul><li><p>watch çš„å¥—è·¯æ˜¯ï¼šæ—¢è¦æŒ‡æ˜ç›‘è§†çš„å±æ€§ï¼Œä¹Ÿè¦æŒ‡æ˜ç›‘è§†çš„å›è°ƒã€‚</p></li><li><p>watchEffect çš„å¥—è·¯æ˜¯ï¼šä¸ç”¨æŒ‡æ˜ç›‘è§†å“ªä¸ªå±æ€§ï¼Œç›‘è§†çš„å›è°ƒä¸­ç”¨åˆ°å“ªä¸ªå±æ€§ï¼Œé‚£å°±ç›‘è§†å“ªä¸ªå±æ€§ã€‚</p></li><li><p>watchEffect æœ‰ç‚¹åƒ computedï¼š</p><ul><li>ä½† computed æ³¨é‡çš„è®¡ç®—å‡ºæ¥çš„å€¼ï¼ˆå›è°ƒå‡½æ•°çš„è¿”å›å€¼ï¼‰ï¼Œæ‰€ä»¥å¿…é¡»è¦å†™è¿”å›å€¼ã€‚</li><li>è€Œ watchEffect æ›´æ³¨é‡çš„æ˜¯è¿‡ç¨‹ï¼ˆå›è°ƒå‡½æ•°çš„å‡½æ•°ä½“ï¼‰ï¼Œæ‰€ä»¥ä¸ç”¨å†™è¿”å›å€¼ã€‚</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//watchEffectæ‰€æŒ‡å®šçš„å›è°ƒä¸­ç”¨åˆ°çš„æ•°æ®åªè¦å‘ç”Ÿå˜åŒ–ï¼Œåˆ™ç›´æ¥é‡æ–°æ‰§è¡Œå›è°ƒã€‚</span><br><span class="hljs-title function_">watchEffect</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-keyword">const</span> x1 = sum.<span class="hljs-property">value</span>;<br>  <span class="hljs-keyword">const</span> x2 = person.<span class="hljs-property">age</span>;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;watchEffecté…ç½®çš„å›è°ƒæ‰§è¡Œäº†&quot;</span>);<br>&#125;);<br></code></pre></td></tr></table></figure></li></ul><h2 id="8-ç”Ÿå‘½å‘¨æœŸ"><a href="#8-ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="8.ç”Ÿå‘½å‘¨æœŸ"></a>8.ç”Ÿå‘½å‘¨æœŸ</h2><ul><li>Vue3.0 ä¸­å¯ä»¥ç»§ç»­ä½¿ç”¨ Vue2.x ä¸­çš„ç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œä½†æœ‰æœ‰ä¸¤ä¸ªè¢«æ›´åï¼š<ul><li><code>beforeDestroy</code>æ”¹åä¸º <code>beforeUnmount</code></li><li><code>destroyed</code>æ”¹åä¸º <code>unmounted</code></li></ul></li><li>Vue3.0 ä¹Ÿæä¾›äº† Composition API å½¢å¼çš„ç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œä¸ Vue2.x ä¸­é’©å­å¯¹åº”å…³ç³»å¦‚ä¸‹ï¼š<ul><li><code>beforeCreate</code>===&gt;<code>setup()</code></li><li><code>created</code>=======&gt;<code>setup()</code></li><li><code>beforeMount</code> ===&gt;<code>onBeforeMount</code></li><li><code>mounted</code>=======&gt;<code>onMounted</code></li><li><code>beforeUpdate</code>===&gt;<code>onBeforeUpdate</code></li><li><code>updated</code> =======&gt;<code>onUpdated</code></li><li><code>beforeUnmount</code>Â ==&gt;<code>onBeforeUnmount</code></li><li><code>unmounted</code> =====&gt;<code>onUnmounted</code></li></ul></li></ul><h2 id="9-è‡ªå®šä¹‰-hook-å‡½æ•°"><a href="#9-è‡ªå®šä¹‰-hook-å‡½æ•°" class="headerlink" title="9.è‡ªå®šä¹‰ hook å‡½æ•°"></a>9.è‡ªå®šä¹‰ hook å‡½æ•°</h2><ul><li><p>ä»€ä¹ˆæ˜¯ hookï¼Ÿâ€”â€” æœ¬è´¨æ˜¯ä¸€ä¸ªå‡½æ•°ï¼ŒæŠŠ setup å‡½æ•°ä¸­ä½¿ç”¨çš„ Composition API è¿›è¡Œäº†å°è£…ã€‚</p></li><li><p>ç±»ä¼¼äº vue2.x ä¸­çš„ mixinã€‚</p></li><li><p>è‡ªå®šä¹‰ hook çš„ä¼˜åŠ¿: å¤ç”¨ä»£ç , è®© setup ä¸­çš„é€»è¾‘æ›´æ¸…æ¥šæ˜“æ‡‚ã€‚</p></li></ul><h2 id="10-toRef"><a href="#10-toRef" class="headerlink" title="10.toRef"></a>10.toRef</h2><ul><li><p>ä½œç”¨ï¼šåˆ›å»ºä¸€ä¸ª ref å¯¹è±¡ï¼Œå…¶ value å€¼æŒ‡å‘å¦ä¸€ä¸ªå¯¹è±¡ä¸­çš„æŸä¸ªå±æ€§ã€‚</p></li><li><p>è¯­æ³•ï¼š<code>const name = toRef(person,&#39;name&#39;)</code></p></li><li><p>åº”ç”¨: è¦å°†å“åº”å¼å¯¹è±¡ä¸­çš„æŸä¸ªå±æ€§å•ç‹¬æä¾›ç»™å¤–éƒ¨ä½¿ç”¨æ—¶ã€‚</p></li><li><p>æ‰©å±•ï¼š<code>toRefs</code> ä¸<code>toRef</code>åŠŸèƒ½ä¸€è‡´ï¼Œä½†å¯ä»¥æ‰¹é‡åˆ›å»ºå¤šä¸ª ref å¯¹è±¡ï¼Œè¯­æ³•ï¼š<code>toRefs(person)</code></p></li></ul><h1 id="ä¸‰ã€å…¶å®ƒ-Composition-API"><a href="#ä¸‰ã€å…¶å®ƒ-Composition-API" class="headerlink" title="ä¸‰ã€å…¶å®ƒ Composition API"></a>ä¸‰ã€å…¶å®ƒ Composition API</h1><h2 id="1-shallowReactive-ä¸-shallowRef"><a href="#1-shallowReactive-ä¸-shallowRef" class="headerlink" title="1.shallowReactive ä¸ shallowRef"></a>1.shallowReactive ä¸ shallowRef</h2><ul><li><p>shallowReactiveï¼šåªå¤„ç†å¯¹è±¡æœ€å¤–å±‚å±æ€§çš„å“åº”å¼ï¼ˆæµ…å“åº”å¼ï¼‰ã€‚</p></li><li><p>shallowRefï¼šåªå¤„ç†åŸºæœ¬æ•°æ®ç±»å‹çš„å“åº”å¼, ä¸è¿›è¡Œå¯¹è±¡çš„å“åº”å¼å¤„ç†ã€‚</p></li><li><p>ä»€ä¹ˆæ—¶å€™ä½¿ç”¨?</p><ul><li>å¦‚æœæœ‰ä¸€ä¸ªå¯¹è±¡æ•°æ®ï¼Œç»“æ„æ¯”è¾ƒæ·±, ä½†å˜åŒ–æ—¶åªæ˜¯å¤–å±‚å±æ€§å˜åŒ– ===&gt; shallowReactiveã€‚</li><li>å¦‚æœæœ‰ä¸€ä¸ªå¯¹è±¡æ•°æ®ï¼Œåç»­åŠŸèƒ½ä¸ä¼šä¿®æ”¹è¯¥å¯¹è±¡ä¸­çš„å±æ€§ï¼Œè€Œæ˜¯ç”Ÿæ–°çš„å¯¹è±¡æ¥æ›¿æ¢ ===&gt; shallowRefã€‚</li></ul></li></ul><h2 id="2-readonly-ä¸-shallowReadonly"><a href="#2-readonly-ä¸-shallowReadonly" class="headerlink" title="2.readonly ä¸ shallowReadonly"></a>2.readonly ä¸ shallowReadonly</h2><ul><li>readonly: è®©ä¸€ä¸ªå“åº”å¼æ•°æ®å˜ä¸ºåªè¯»çš„ï¼ˆæ·±åªè¯»ï¼‰ã€‚</li><li>shallowReadonlyï¼šè®©ä¸€ä¸ªå“åº”å¼æ•°æ®å˜ä¸ºåªè¯»çš„ï¼ˆæµ…åªè¯»ï¼‰ã€‚</li><li>åº”ç”¨åœºæ™¯: ä¸å¸Œæœ›æ•°æ®è¢«ä¿®æ”¹æ—¶ã€‚</li></ul><h2 id="3-toRaw-ä¸-markRaw"><a href="#3-toRaw-ä¸-markRaw" class="headerlink" title="3.toRaw ä¸ markRaw"></a>3.toRaw ä¸ markRaw</h2><ul><li>toRawï¼š<ul><li>ä½œç”¨ï¼šå°†ä¸€ä¸ªç”±<code>reactive</code>ç”Ÿæˆçš„<strong style="color:orange">å“åº”å¼å¯¹è±¡</strong>è½¬ä¸º<strong style="color:orange">æ™®é€šå¯¹è±¡</strong>ã€‚</li><li>ä½¿ç”¨åœºæ™¯ï¼šç”¨äºè¯»å–å“åº”å¼å¯¹è±¡å¯¹åº”çš„æ™®é€šå¯¹è±¡ï¼Œå¯¹è¿™ä¸ªæ™®é€šå¯¹è±¡çš„æ‰€æœ‰æ“ä½œï¼Œä¸ä¼šå¼•èµ·é¡µé¢æ›´æ–°ã€‚</li></ul></li><li>markRawï¼š<ul><li>ä½œç”¨ï¼šæ ‡è®°ä¸€ä¸ªå¯¹è±¡ï¼Œä½¿å…¶æ°¸è¿œä¸ä¼šå†æˆä¸ºå“åº”å¼å¯¹è±¡ã€‚</li><li>åº”ç”¨åœºæ™¯:<ol><li>æœ‰äº›å€¼ä¸åº”è¢«è®¾ç½®ä¸ºå“åº”å¼çš„ï¼Œä¾‹å¦‚å¤æ‚çš„ç¬¬ä¸‰æ–¹ç±»åº“ç­‰ã€‚</li><li>å½“æ¸²æŸ“å…·æœ‰ä¸å¯å˜æ•°æ®æºçš„å¤§åˆ—è¡¨æ—¶ï¼Œè·³è¿‡å“åº”å¼è½¬æ¢å¯ä»¥æé«˜æ€§èƒ½ã€‚</li></ol></li></ul></li></ul><h2 id="4-customRef"><a href="#4-customRef" class="headerlink" title="4.customRef"></a>4.customRef</h2><ul><li><p>ä½œç”¨ï¼šåˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„ refï¼Œå¹¶å¯¹å…¶ä¾èµ–é¡¹è·Ÿè¸ªå’Œæ›´æ–°è§¦å‘è¿›è¡Œæ˜¾å¼æ§åˆ¶ã€‚</p></li><li><p>å®ç°é˜²æŠ–æ•ˆæœï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;input type=&quot;text&quot; v-model=&quot;keyword&quot; /&gt;<br>  &lt;h3&gt;&#123;&#123; keyword &#125;&#125;&lt;/h3&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>import &#123; ref, customRef &#125; from &quot;vue&quot;;<br>export default &#123;<br>  name: &quot;Demo&quot;,<br>  setup() &#123;<br>    // let keyword = ref(&#x27;hello&#x27;) //ä½¿ç”¨Vueå‡†å¤‡å¥½çš„å†…ç½®ref<br>    //è‡ªå®šä¹‰ä¸€ä¸ªmyRef<br>    function myRef(value, delay) &#123;<br>      let timer;<br>      //é€šè¿‡customRefå»å®ç°è‡ªå®šä¹‰<br>      return customRef((track, trigger) =&gt; &#123;<br>        return &#123;<br>          get() &#123;<br>            track(); //å‘Šè¯‰Vueè¿™ä¸ªvalueå€¼æ˜¯éœ€è¦è¢«â€œè¿½è¸ªâ€çš„<br>            return value;<br>          &#125;,<br>          set(newValue) &#123;<br>            clearTimeout(timer);<br>            timer = setTimeout(() =&gt; &#123;<br>              value = newValue;<br>              trigger(); //å‘Šè¯‰Vueå»æ›´æ–°ç•Œé¢<br>            &#125;, delay);<br>          &#125;,<br>        &#125;;<br>      &#125;);<br>    &#125;<br>    let keyword = myRef(&quot;hello&quot;, 500); //ä½¿ç”¨ç¨‹åºå‘˜è‡ªå®šä¹‰çš„ref<br>    return &#123;<br>      keyword,<br>    &#125;;<br>  &#125;,<br>&#125;;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure></li></ul><h2 id="5-provide-ä¸-inject"><a href="#5-provide-ä¸-inject" class="headerlink" title="5.provide ä¸ inject"></a>5.provide ä¸ inject</h2><ul><li><p>ä½œç”¨ï¼šå®ç°<strong style="color:#dd5145">ç¥–ä¸åä»£ç»„ä»¶é—´</strong>é€šä¿¡</p></li><li><p>å¥—è·¯ï¼šçˆ¶ç»„ä»¶æœ‰ä¸€ä¸ª <code>provide</code> é€‰é¡¹æ¥æä¾›æ•°æ®ï¼Œåä»£ç»„ä»¶æœ‰ä¸€ä¸ª <code>inject</code> é€‰é¡¹æ¥å¼€å§‹ä½¿ç”¨è¿™äº›æ•°æ®</p></li><li><p>å…·ä½“å†™æ³•ï¼š</p><ol><li><p>ç¥–ç»„ä»¶ä¸­ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-title function_">setup</span>(<span class="hljs-params"></span>)&#123;<br>	......<br>    <span class="hljs-keyword">let</span> car = <span class="hljs-title function_">reactive</span>(&#123;<span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;å¥”é©°&#x27;</span>,<span class="hljs-attr">price</span>:<span class="hljs-string">&#x27;40ä¸‡&#x27;</span>&#125;)<br>    <span class="hljs-title function_">provide</span>(<span class="hljs-string">&#x27;car&#x27;</span>,car)<br>    ......<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>åä»£ç»„ä»¶ä¸­ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-title function_">setup</span>(<span class="hljs-params">props,context</span>)&#123;<br>	......<br>    <span class="hljs-keyword">const</span> car = <span class="hljs-title function_">inject</span>(<span class="hljs-string">&#x27;car&#x27;</span>)<br>    <span class="hljs-keyword">return</span> &#123;car&#125;<br>	......<br>&#125;<br></code></pre></td></tr></table></figure></li></ol></li></ul><h2 id="6-å“åº”å¼æ•°æ®çš„åˆ¤æ–­"><a href="#6-å“åº”å¼æ•°æ®çš„åˆ¤æ–­" class="headerlink" title="6.å“åº”å¼æ•°æ®çš„åˆ¤æ–­"></a>6.å“åº”å¼æ•°æ®çš„åˆ¤æ–­</h2><ul><li>isRef: æ£€æŸ¥ä¸€ä¸ªå€¼æ˜¯å¦ä¸ºä¸€ä¸ª ref å¯¹è±¡</li><li>isReactive: æ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯ç”± <code>reactive</code> åˆ›å»ºçš„å“åº”å¼ä»£ç†</li><li>isReadonly: æ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯ç”± <code>readonly</code> åˆ›å»ºçš„åªè¯»ä»£ç†</li><li>isProxy: æ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯ç”± <code>reactive</code> æˆ–è€… <code>readonly</code> æ–¹æ³•åˆ›å»ºçš„ä»£ç†</li></ul><h1 id="å››ã€Composition-API-çš„ä¼˜åŠ¿"><a href="#å››ã€Composition-API-çš„ä¼˜åŠ¿" class="headerlink" title="å››ã€Composition API çš„ä¼˜åŠ¿"></a>å››ã€Composition API çš„ä¼˜åŠ¿</h1><h2 id="1-Options-API-å­˜åœ¨çš„é—®é¢˜"><a href="#1-Options-API-å­˜åœ¨çš„é—®é¢˜" class="headerlink" title="1.Options API å­˜åœ¨çš„é—®é¢˜"></a>1.Options API å­˜åœ¨çš„é—®é¢˜</h2><p>ä½¿ç”¨ä¼ ç»Ÿ OptionsAPI ä¸­ï¼Œæ–°å¢æˆ–è€…ä¿®æ”¹ä¸€ä¸ªéœ€æ±‚ï¼Œå°±éœ€è¦åˆ†åˆ«åœ¨ dataï¼Œmethodsï¼Œcomputed é‡Œä¿®æ”¹ ã€‚</p><span style="width:600px;height:300px;overflow:hidden"><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f84e4e2c02424d9a99862ade0a2e4114~tplv-k3u1fbpfcp-watermark.image" srcset="/img/loading1.gif" lazyload style="width:600px;float:left"> </span><span style="width:300px;height:400px;overflow:hidden"><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e5ac7e20d1784887a826f6360768a368~tplv-k3u1fbpfcp-watermark.image" srcset="/img/loading1.gif" lazyload style="zoom:50%;width:560px"></span><h2 id="2-Composition-API-çš„ä¼˜åŠ¿"><a href="#2-Composition-API-çš„ä¼˜åŠ¿" class="headerlink" title="2.Composition API çš„ä¼˜åŠ¿"></a>2.Composition API çš„ä¼˜åŠ¿</h2><p>æˆ‘ä»¬å¯ä»¥æ›´åŠ ä¼˜é›…çš„ç»„ç»‡æˆ‘ä»¬çš„ä»£ç ï¼Œå‡½æ•°ã€‚è®©ç›¸å…³åŠŸèƒ½çš„ä»£ç æ›´åŠ æœ‰åºçš„ç»„ç»‡åœ¨ä¸€èµ·ã€‚</p><span style="width:300px;height:340px;overflow:hidden" title="ç‚¹å‡»æŸ¥çœ‹"><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bc0be8211fc54b6c941c036791ba4efe~tplv-k3u1fbpfcp-watermark.image" srcset="/img/loading1.gif" lazyload style="height:200px"> </span><span style="width:300px;height:340px;overflow:hidden" title="ç‚¹å‡»æŸ¥çœ‹"><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6cc55165c0e34069a75fe36f8712eb80~tplv-k3u1fbpfcp-watermark.image" srcset="/img/loading1.gif" lazyload style="height:200px"></span><h1 id="äº”ã€æ–°çš„ç»„ä»¶"><a href="#äº”ã€æ–°çš„ç»„ä»¶" class="headerlink" title="äº”ã€æ–°çš„ç»„ä»¶"></a>äº”ã€æ–°çš„ç»„ä»¶</h1><h2 id="1-Fragment"><a href="#1-Fragment" class="headerlink" title="1.Fragment"></a>1.Fragment</h2><ul><li>åœ¨ Vue2 ä¸­: ç»„ä»¶å¿…é¡»æœ‰ä¸€ä¸ªæ ¹æ ‡ç­¾</li><li>åœ¨ Vue3 ä¸­: ç»„ä»¶å¯ä»¥æ²¡æœ‰æ ¹æ ‡ç­¾, å†…éƒ¨ä¼šå°†å¤šä¸ªæ ‡ç­¾åŒ…å«åœ¨ä¸€ä¸ª Fragment è™šæ‹Ÿå…ƒç´ ä¸­</li><li>å¥½å¤„: å‡å°‘æ ‡ç­¾å±‚çº§, å‡å°å†…å­˜å ç”¨</li></ul><h2 id="2-Teleport"><a href="#2-Teleport" class="headerlink" title="2.Teleport"></a>2.Teleport</h2><ul><li><p>ä»€ä¹ˆæ˜¯ Teleportï¼Ÿâ€”â€” <code>Teleport</code> æ˜¯ä¸€ç§èƒ½å¤Ÿå°†æˆ‘ä»¬çš„<strong style="color:#dd5145">ç»„ä»¶ html ç»“æ„</strong>ç§»åŠ¨åˆ°æŒ‡å®šä½ç½®çš„æŠ€æœ¯ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;teleport to=&quot;ç§»åŠ¨ä½ç½®&quot;&gt;<br>	&lt;div v-if=&quot;isShow&quot; class=&quot;mask&quot;&gt;<br>		&lt;div class=&quot;dialog&quot;&gt;<br>			&lt;h3&gt;æˆ‘æ˜¯ä¸€ä¸ªå¼¹çª—&lt;/h3&gt;<br>			&lt;button @click=&quot;isShow = false&quot;&gt;å…³é—­å¼¹çª—&lt;/button&gt;<br>		&lt;/div&gt;<br>	&lt;/div&gt;<br>&lt;/teleport&gt;<br></code></pre></td></tr></table></figure></li></ul><h2 id="3-Suspense"><a href="#3-Suspense" class="headerlink" title="3.Suspense"></a>3.Suspense</h2><ul><li><p>ç­‰å¾…å¼‚æ­¥ç»„ä»¶æ—¶æ¸²æŸ“ä¸€äº›é¢å¤–å†…å®¹ï¼Œè®©åº”ç”¨æœ‰æ›´å¥½çš„ç”¨æˆ·ä½“éªŒ</p></li><li><p>ä½¿ç”¨æ­¥éª¤ï¼š</p><ul><li><p>å¼‚æ­¥å¼•å…¥ç»„ä»¶</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; defineAsyncComponent &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span>;<br><span class="hljs-keyword">const</span> <span class="hljs-title class_">Child</span> = <span class="hljs-title function_">defineAsyncComponent</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">import</span>(<span class="hljs-string">&quot;./components/Child.vue&quot;</span>));<br></code></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨<code>Suspense</code>åŒ…è£¹ç»„ä»¶ï¼Œå¹¶é…ç½®å¥½<code>default</code> ä¸ <code>fallback</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class=&quot;app&quot;&gt;<br>    &lt;h3&gt;æˆ‘æ˜¯Appç»„ä»¶&lt;/h3&gt;<br>    &lt;Suspense&gt;<br>      &lt;template v-slot:default&gt;<br>        &lt;Child /&gt;<br>      &lt;/template&gt;<br>      &lt;template v-slot:fallback&gt;<br>        &lt;h3&gt;åŠ è½½ä¸­.....&lt;/h3&gt;<br>      &lt;/template&gt;<br>    &lt;/Suspense&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br></code></pre></td></tr></table></figure></li></ul></li></ul><h1 id="å…­ã€å…¶ä»–"><a href="#å…­ã€å…¶ä»–" class="headerlink" title="å…­ã€å…¶ä»–"></a>å…­ã€å…¶ä»–</h1><h2 id="1-å…¨å±€-API-çš„è½¬ç§»"><a href="#1-å…¨å±€-API-çš„è½¬ç§»" class="headerlink" title="1.å…¨å±€ API çš„è½¬ç§»"></a>1.å…¨å±€ API çš„è½¬ç§»</h2><ul><li><p>Vue 2.x æœ‰è®¸å¤šå…¨å±€ API å’Œé…ç½®ã€‚</p><ul><li><p>ä¾‹å¦‚ï¼šæ³¨å†Œå…¨å±€ç»„ä»¶ã€æ³¨å†Œå…¨å±€æŒ‡ä»¤ç­‰ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//æ³¨å†Œå…¨å±€ç»„ä»¶</span><br><span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;MyButton&#x27;</span>, &#123;<br>  <span class="hljs-attr">data</span>: <span class="hljs-function">() =&gt;</span> (&#123;<br>    <span class="hljs-attr">count</span>: <span class="hljs-number">0</span><br>  &#125;),<br>  <span class="hljs-attr">template</span>: <span class="hljs-string">&#x27;&lt;button @click=&quot;count++&quot;&gt;Clicked &#123;&#123; count &#125;&#125; times.&lt;/button&gt;&#x27;</span><br>&#125;)<br><br><span class="hljs-comment">//æ³¨å†Œå…¨å±€æŒ‡ä»¤</span><br><span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">directive</span>(<span class="hljs-string">&#x27;focus&#x27;</span>, &#123;<br>  <span class="hljs-attr">inserted</span>: <span class="hljs-function"><span class="hljs-params">el</span> =&gt;</span> el.<span class="hljs-title function_">focus</span>()<br>&#125;<br></code></pre></td></tr></table></figure></li></ul></li><li><p>Vue3.0 ä¸­å¯¹è¿™äº› API åšå‡ºäº†è°ƒæ•´ï¼š</p><ul><li><p>å°†å…¨å±€çš„ APIï¼Œå³ï¼š<code>Vue.xxx</code>è°ƒæ•´åˆ°åº”ç”¨å®ä¾‹ï¼ˆ<code>app</code>ï¼‰ä¸Š</p><table><thead><tr><th>2.x å…¨å±€ APIï¼ˆ<code>Vue</code>ï¼‰</th><th>3.x å®ä¾‹ API (<code>app</code>)</th></tr></thead><tbody><tr><td>Vue.config.xxxx</td><td>app.config.xxxx</td></tr><tr><td>Vue.config.productionTip</td><td><strong style="color:#dd5145">ç§»é™¤</strong></td></tr><tr><td>Vue.component</td><td>app.component</td></tr><tr><td>Vue.directive</td><td>app.directive</td></tr><tr><td>Vue.mixin</td><td>app.mixin</td></tr><tr><td>Vue.use</td><td>app.use</td></tr><tr><td>Vue.prototype</td><td>app.config.globalProperties</td></tr></tbody></table></li></ul></li></ul><h2 id="2-å…¶ä»–æ”¹å˜"><a href="#2-å…¶ä»–æ”¹å˜" class="headerlink" title="2.å…¶ä»–æ”¹å˜"></a>2.å…¶ä»–æ”¹å˜</h2><ul><li><p>data é€‰é¡¹åº”å§‹ç»ˆè¢«å£°æ˜ä¸ºä¸€ä¸ªå‡½æ•°ã€‚</p></li><li><p>è¿‡åº¦ç±»åçš„æ›´æ”¹ï¼š</p><ul><li><p>Vue2.x å†™æ³•</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.v-enter</span>,<br><span class="hljs-selector-class">.v-leave-to</span> &#123;<br>  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-selector-class">.v-leave</span>,<br><span class="hljs-selector-class">.v-enter-to</span> &#123;<br>  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>Vue3.x å†™æ³•</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.v-enter-from</span>,<br><span class="hljs-selector-class">.v-leave-to</span> &#123;<br>  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>;<br>&#125;<br><br><span class="hljs-selector-class">.v-leave-from</span>,<br><span class="hljs-selector-class">.v-enter-to</span> &#123;<br>  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul></li><li><p><strong style="color:#dd5145">ç§»é™¤</strong>keyCode ä½œä¸º v-on çš„ä¿®é¥°ç¬¦ï¼ŒåŒæ—¶ä¹Ÿä¸å†æ”¯æŒ<code>config.keyCodes</code></p></li><li><p><strong style="color:#dd5145">ç§»é™¤</strong><code>v-on.native</code>ä¿®é¥°ç¬¦</p><ul><li><p>çˆ¶ç»„ä»¶ä¸­ç»‘å®šäº‹ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;my-component<br>  v-on:close=&quot;handleComponentEvent&quot;<br>  v-on:click=&quot;handleNativeClickEvent&quot;<br>/&gt;<br></code></pre></td></tr></table></figure></li><li><p>å­ç»„ä»¶ä¸­å£°æ˜è‡ªå®šä¹‰äº‹ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script&gt;<br>export default &#123;<br>  emits: [&quot;close&quot;],<br>&#125;;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure></li></ul></li><li><p><strong style="color:#dd5145">ç§»é™¤</strong>è¿‡æ»¤å™¨ï¼ˆfilterï¼‰</p><blockquote><p>è¿‡æ»¤å™¨è™½ç„¶è¿™çœ‹èµ·æ¥å¾ˆæ–¹ä¾¿ï¼Œä½†å®ƒéœ€è¦ä¸€ä¸ªè‡ªå®šä¹‰è¯­æ³•ï¼Œæ‰“ç ´å¤§æ‹¬å·å†…è¡¨è¾¾å¼æ˜¯ â€œåªæ˜¯ JavaScriptâ€ çš„å‡è®¾ï¼Œè¿™ä¸ä»…æœ‰å­¦ä¹ æˆæœ¬ï¼Œè€Œä¸”æœ‰å®ç°æˆæœ¬ï¼å»ºè®®ç”¨æ–¹æ³•è°ƒç”¨æˆ–è®¡ç®—å±æ€§å»æ›¿æ¢è¿‡æ»¤å™¨ã€‚</p></blockquote><hr></li></ul></div><hr><div><div class="post-metas my-3"><div class="post-meta mr-3 d-flex align-items-center"><i class="iconfont icon-category"></i> <span class="category-chains"><span class="category-chain"><a href="/categories/Vue/" class="category-chain-item">Vue</a></span></span></div><div class="post-meta"><i class="iconfont icon-tags"></i> <a href="/tags/vue3/">#vue3</a></div></div><div class="license-box my-3"><div class="license-title"><div>å…³äºvue3</div><div>http://example.com/2022/08/30/vue3å¿«é€Ÿä¸Šæ‰‹/</div></div><div class="license-meta"><div class="license-meta-item"><div>ä½œè€…</div><div>å°å°å°ç†ŠçŒ«</div></div><div class="license-meta-item license-meta-date"><div>å‘å¸ƒäº</div><div>2022å¹´8æœˆ30æ—¥</div></div><div class="license-meta-item"><div>è®¸å¯åè®®</div><div><a target="_blank" href="https://creativecommons.org/licenses/by/4.0/"><span class="hint--top hint--rounded" aria-label="BY - ç½²å"><i class="iconfont icon-by"></i></span></a></div></div></div><div class="license-icon iconfont"></div></div><div class="post-prevnext my-3"><article class="post-prev col-6"><a href="/2022/08/30/%E7%94%A8Promise%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E7%BA%A2%E7%BB%BF%E7%81%AF%E6%95%88%E6%9E%9C/" title="ç”¨Promiseå®ç°ç®€å•çš„çº¢ç»¿ç¯æ•ˆæœ"><i class="iconfont icon-arrowleft"></i> <span class="hidden-mobile">ç”¨Promiseå®ç°ç®€å•çš„çº¢ç»¿ç¯æ•ˆæœ</span> <span class="visible-mobile">ä¸Šä¸€ç¯‡</span></a></article><article class="post-next col-6"><a href="/2022/08/30/%E5%85%B3%E4%BA%8Evue%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" title="å…³äºvue2"><span class="hidden-mobile">å…³äºvue2</span> <span class="visible-mobile">ä¸‹ä¸€ç¯‡</span> <i class="iconfont icon-arrowright"></i></a></article></div></div><article id="comments" lazyload><div id="valine"></div><script type="text/javascript">Fluid.utils.loadComments("#valine",function(){Fluid.utils.createScript("https://lib.baomitu.com/valine/1.4.17/Valine.min.js",function(){var i=Object.assign({appId:"zS58KrYRwyaLlLiGO9KLFmbI-gzGzoHsz",appKey:"bLR5HdAJ30lz1WkxlLhRzbi9",path:"window.location.pathname",placeholder:"è¦ä¸è¯´ç‚¹å•¥...",avatar:"retro",meta:["nick","mail","link"],requiredFields:[],pageSize:10,lang:"zh-CN",highlight:!0,recordIP:!0,serverURLs:"",emojiCDN:null,emojiMaps:null,enableQQ:!1},{el:"#valine",path:window.location.pathname});new Valine(i),Fluid.utils.waitElementVisible("#valine .vcontent",()=>{var i="#valine .vcontent img:not(.vemoji)";Fluid.plugins.imageCaption(i),Fluid.plugins.fancyBox(i)})})})</script><noscript>Please enable JavaScript to view the comments</noscript></article></article></div></div></div><div class="side-col d-none d-lg-block col-lg-2"><aside class="sidebar" style="margin-left:-1rem"><div id="toc"><p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;ç›®å½•</p><div class="toc-body" id="toc-body"></div></div></aside></div></div></div><a id="scroll-top-button" aria-label="TOP" href="#" role="button"><i class="iconfont icon-arrowup" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">æœç´¢</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">å…³é”®è¯</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div></main><footer><div class="footer-inner"><div class="footer-content"><a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a></div><div class="statistics"><span id="leancloud-site-pv-container" style="display:none">æ€»è®¿é—®é‡ <span id="leancloud-site-pv"></span> æ¬¡ </span><span id="leancloud-site-uv-container" style="display:none">æ€»è®¿å®¢æ•° <span id="leancloud-site-uv"></span> äºº</span></div></div></footer><script type="text/javascript" src="//cdn.jsdelivr.net/gh/bynotes/texiao/source/js/jingtaisidai.js"></script><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/bynotes/texiao/source/css/toubudaziji.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/bynotes/texiao/source/css/shubiao.css"><script src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js"></script><link rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css"><script>NProgress.configure({showSpinner:!1,trickleSpeed:100}),NProgress.start(),window.addEventListener("load",function(){NProgress.done()})</script><script src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js"></script><script src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js"></script><script src="/js/events.js"></script><script src="/js/plugins.js"></script><script src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js"></script><script>!function(t){var e=Fluid.plugins.typing,t=t.getElementById("subtitle");t&&e&&e(t.getAttribute("data-typed-text"))}((window,document))</script><script src="/js/img-lazyload.js"></script><script>Fluid.utils.createScript("https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js",function(){var t,o=jQuery("#toc");0!==o.length&&window.tocbot&&(t=jQuery("#board-ctn").offset().top,window.tocbot.init({tocSelector:"#toc-body",contentSelector:".markdown-body",headingSelector:CONFIG.toc.headingSelector||"h1,h2,h3,h4,h5,h6",linkClass:"tocbot-link",activeLinkClass:"tocbot-active-link",listClass:"tocbot-list",isCollapsedClass:"tocbot-is-collapsed",collapsibleClass:"tocbot-is-collapsible",collapseDepth:CONFIG.toc.collapseDepth||0,scrollSmooth:!0,headingsOffset:-t}),0<o.find(".toc-list-item").length&&o.css("visibility","visible"))})</script><script src="https://lib.baomitu.com/clipboard.js/2.0.10/clipboard.min.js"></script><script>Fluid.plugins.codeWidget()</script><script>Fluid.utils.createScript("https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js",function(){window.anchors.options={placement:CONFIG.anchorjs.placement,visible:CONFIG.anchorjs.visible},CONFIG.anchorjs.icon&&(window.anchors.options.icon=CONFIG.anchorjs.icon);var o,n=[];for(o of(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","))n.push(".markdown-body > "+o.trim());"left"===CONFIG.anchorjs.placement&&(window.anchors.options.class="anchorjs-link-left"),window.anchors.add(n.join(", "))})</script><script>Fluid.utils.createScript("https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js",function(){Fluid.plugins.fancyBox()})</script><script>Fluid.plugins.imageCaption()</script><script defer src="/js/leancloud.js"></script><script src="/js/local-search.js"></script><script src="/js/boot.js"></script><noscript><div class="noscript-warning">åšå®¢åœ¨å…è®¸ JavaScript è¿è¡Œçš„ç¯å¢ƒä¸‹æµè§ˆæ•ˆæœæ›´ä½³</div></noscript><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({model:{jsonPath:"/live2dw/assets/haruto.model.json"},display:{position:"right",width:300,height:600},mobile:{show:!1},log:!1,pluginJsPath:"lib/",pluginModelPath:"assets/",pluginRootPath:"live2dw/",tagMode:!1})</script></body></html><script type="text/javascript" src="/js/love.js"></script><script type="text/javascript" src="/js/click_show_text.js"></script><script type="text/javascript" src="\js\xuehua.js"></script>